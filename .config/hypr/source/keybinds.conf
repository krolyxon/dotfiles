###################
### KEYBINDINGS ###
###################

# See https://wiki.hypr.land/Configuring/Keywords/
$mainMod = SUPER # Sets "Windows" key as main modifier

# Example binds, see https://wiki.hypr.land/Configuring/Binds/ for more
bind = $mainMod, Return, exec, $terminal
bind = $mainMod SHIFT, X, killactive,
bind = $mainMod SHIFT, Q, exit,
bind = $mainMod, F, Fullscreen
bind = $mainMod SHIFT, F, Fullscreen, 1
# bind = $mainMod SHIFT, R, togglefloating,
# Smart Float: Toggle float -> Resize to 90% -> Center
bind = $mainMod SHIFT, R, exec, if hyprctl -j activewindow | jq -e '.floating | not'; then hyprctl --batch "dispatch togglefloating; dispatch resizeactive exact 90% 90%; dispatch centerwindow"; else hyprctl dispatch togglefloating; fi
bind = $mainMod, R, exec, $menu
bind = $mainMod SHIFT, P, pseudo, # dwindle
bind = $mainMod, J, togglesplit, # dwindle
binde = $mainMod, tab, cyclenext, prev
bind = $mainMod, b, exec, killall waybar || waybar
bind = $mainMod, grave, exec, fuzzelunicode
bind = $mainMod, escape, exec, sysact

# Applications
bind = $mainMod, W, exec, $browser
bind = ,PRINT, exec, hypr_screenshot.sh
bind = $mainMod SHIFT, P, exec, hypr_screenshot.sh

# Music Controls
bind = $mainMod, m, exec, $terminal -e zsh -i -c "ncmpcpp"
bind = $mainMod, p, exec, mpc toggle
binde = $mainMod, period, exec, mpc seek +10
binde = $mainMod, comma, exec, mpc seek -10
bind  = $mainMod SHIFT, period, exec, mpc next
bind  = $mainMod SHIFT, comma, exec, mpc prev

# Swap current focused window with master
bind = $mainMod, space, layoutmsg, swapwithmaster

# Resize windows with h/j/k/l
binde = $mainMod, h, resizeactive, -30 0
binde = $mainMod, l, resizeactive, 30 0
binde = $mainMod, k, resizeactive, 0 -30
binde = $mainMod, j, resizeactive, 0 30

# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, split-workspace, 1
bind = $mainMod, 2, split-workspace, 2
bind = $mainMod, 3, split-workspace, 3
bind = $mainMod, 4, split-workspace, 4
bind = $mainMod, 5, split-workspace, 5
bind = $mainMod, 6, split-workspace, 6
bind = $mainMod, 7, split-workspace, 7
bind = $mainMod, 8, split-workspace, 8
bind = $mainMod, 9, split-workspace, 9
bind = $mainMod, 0, split-workspace, 10

# Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = $mainMod SHIFT, 1, split-movetoworkspacesilent, 1
bind = $mainMod SHIFT, 2, split-movetoworkspacesilent, 2
bind = $mainMod SHIFT, 3, split-movetoworkspacesilent, 3
bind = $mainMod SHIFT, 4, split-movetoworkspacesilent, 4
bind = $mainMod SHIFT, 5, split-movetoworkspacesilent, 5
bind = $mainMod SHIFT, 6, split-movetoworkspacesilent, 6
bind = $mainMod SHIFT, 7, split-movetoworkspacesilent, 7
bind = $mainMod SHIFT, 8, split-movetoworkspacesilent, 8
bind = $mainMod SHIFT, 9, split-movetoworkspacesilent, 9
bind = $mainMod SHIFT, 0, split-movetoworkspacesilent, 10

# Example special workspace (scratchpad)
bind = $mainMod, S, togglespecialworkspace, magic
bind = $mainMod SHIFT, S, movetoworkspace, special:magic

# Scratchpad like DWM
workspace = special:h, on-created-empty: $terminal
bind = $mainMod SHIFT, Return, togglespecialworkspace, h


# Accessibility: Zoom
cursor:zoom_disable_aa = true
# Zoom In
binded = SUPER, equal, Zoom In, exec, sh -c "hyprctl keyword cursor:zoom_factor \"$(hyprctl getoption cursor:zoom_factor | awk 'NR==1 {print $2 * 1.25}')\""
# Zoom Out
binded = SUPER, minus, Zoom Out, exec, sh -c "hyprctl keyword cursor:zoom_factor \"$(hyprctl getoption cursor:zoom_factor | awk 'NR==1 {val = $2 / 1.25; if (val < 1.0) val = 1.0; print val}')\""
# Reset Zoom
bindld = SUPER, BACKSPACE, Reset Zoom, exec, hyprctl keyword cursor:zoom_factor 1.0

# Screen Rotate
bindld = $mainMod CTRL, comma, Rotate Screen Anti-Clockwise, exec,  hypr_screen_rotate.sh +90
bindld = $mainMod CTRL, period, Rotate Screen Clockwise, exec,  hypr_screen_rotate.sh -90

# --- Hyprshade (Visual Filters) ---
bindd = $mainMod CTRL, S, Shader Menu, exec, hypr_shader_menu.sh
bindld = $mainMod CTRL, X, Disable Shader, exec, hyprshade off
bindld = $mainMod CTRL, V, Vibrant Shader, exec, hyprshade on vibrance

# Scroll through existing workspaces with mainMod + scroll
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1

# Move/resize windows with mainMod + LMB/RMB and dragging
bindm = $mainMod, mouse:272, movewindow
bindm = $mainMod, mouse:273, resizewindow

# Laptop multimedia keys for volume and LCD brightness
bindel = ,XF86AudioRaiseVolume, exec, wpctl set-volume -l 1 @DEFAULT_AUDIO_SINK@ 5%+
bindel = ,XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = ,XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = ,XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindel = , XF86MonBrightnessDown, exec, ~/.local/bin/brictl -
bindel = , XF86MonBrightnessUp, exec, ~/.local/bin/brictl +


# Requires playerctl
bindl = , XF86AudioNext, exec, playerctl next
bindl = , XF86AudioPause, exec, playerctl play-pause
bindl = , XF86AudioPlay, exec, playerctl play-pause
bindl = , XF86AudioPrev, exec, playerctl previous
